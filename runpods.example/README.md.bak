# RunPods Setup for ehr-sequencing

**This is an EXAMPLE** - Copy and customize for your setup.

---

## âš ï¸ Important: This Directory is NOT Tracked

The `runpods/` directory contains user-specific configuration and is excluded from git via `.gitignore`.

This `runpods.example/` directory provides templates you can copy.

---

## ğŸš€ Quick Setup

### Step 1: Copy Example Directory

```bash
cd ~/work/ehr-sequencing
cp -r runpods.example runpods
```

### Step 2: Use Scripts

```bash
cd runpods/scripts
./runpod_ssh_manager.sh add ehr-sequencing
```

**Enter when prompted**:
- Hostname: `ssh.runpods.io` (from RunPods dashboard)
- Port: `12345` (from RunPods dashboard)
- Nickname: `a40-48gb` (or your GPU type)
- SSH Key: Press Enter for default

**Result**: SSH alias `runpod-ehr-sequencing-a40-48gb` created

### Step 3: Connect

```bash
ssh runpod-ehr-sequencing-a40-48gb
```

---

## ğŸ“‹ What's Included

### Scripts (Self-Contained)

```
runpods.example/scripts/
â”œâ”€â”€ runpod_ssh_manager.sh      # SSH config manager
â”œâ”€â”€ quick_pod_setup.sh          # Automated setup
â””â”€â”€ test_runpod_manager.sh      # Test suite
```

### Environment Configuration

```
runpods.example/environment-runpods-minimal.yml  # Minimal conda env for pods
```

---

## ğŸ”§ Execution Model

### LOCAL (Your Machine)

Scripts run on **your local machine**:
- `runpod_ssh_manager.sh` - Configures SSH
- `quick_pod_setup.sh` - Automated setup
- `test_runpod_manager.sh` - Tests

**Modifies**: `~/.ssh/config` on your machine

### POD (RunPods Instance)

After SSH'ing to pod:

```bash
cd /workspace
git clone https://github.com/YOUR-USERNAME/ehr-sequencing.git
cd ehr-sequencing
mamba env create -f environment.yml
mamba activate ehr-sequencing
```

---

## ğŸ”’ Privacy

### Why runpods/ is NOT in Git

- âŒ User-specific paths
- âŒ SSH configuration history
- âŒ Personal workflow customizations

### What IS Shared

- âœ… `runpods.example/` - This template
- âœ… Public setup guides

---

## ğŸ“š Usage Workflow

### 1. Initial Setup (Once)

```bash
cd ~/work/ehr-sequencing
cp -r runpods.example runpods
cd runpods/scripts
```

### 2. Configure Pod Access (Per Pod)

```bash
./runpod_ssh_manager.sh add ehr-sequencing
```

### 3. Connect

```bash
ssh runpod-ehr-sequencing-a40-48gb
```

### 4. Setup Environment (On Pod)

```bash
cd /workspace
git clone <your-repo>
cd ehr-sequencing
mamba env create -f environment.yml
mamba activate ehr-sequencing
pip install -e .
```

### 5. Transfer Data (From Local)

```bash
rsync -avzP ~/work/ehr-sequencing/data/ \
  runpod-ehr-sequencing-a40-48gb:/workspace/data/
```

### 6. Start Work (On Pod)

```bash
tmux new -s training
cd /workspace/ehr-sequencing
mamba activate ehr-sequencing
python train.py
```

---

## ğŸ’¡ Tips

- **Use tmux**: Sessions survive disconnection
- **Monitor GPU**: `watch -n 1 nvidia-smi`
- **Check costs**: RunPods dashboard
- **Terminate when done**: Only pay for compute time

---

## ğŸ“– Documentation

For complete setup guide, see: `docs/RUNPODS_SETUP.md` (if available)

---

**Created**: January 28, 2026  
**Status**: Template - Copy to `runpods/` and customize
